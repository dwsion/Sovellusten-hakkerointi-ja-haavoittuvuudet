**Tehtävät**

h3 No strings attached (Tero)

Tiesitkö, että binääreistä saa tietoa jo ennen kuin ne ajaa? Tässä astutaan ensi viikon staattisen analyysin maailmaan.

Staattisen analyysin kruunaamaton kuningas 'strings' tervehtii meitä!

a) Strings. Lataa ezbin-challenges.zip Aja 'passtr'. Selvitä oikea salasana 'strings' avulla. Selvitä myös lippu. (Ensisijaisesti katsomatta sorsia, jos osaat.)
b) Tee passtr.c -ohjelmasta uusi versio, jossa salasana ei näy suoraan sellaisenaan binääristä. Osoita testillä, että salasana ei näy. (Obfuskointi riittää.)
c) Packd. Aja 'packd' paketista ezbin-challenges.zip. Mikä on salasana? Mikä on lippu? (Tämä tehtävä on hieman haastavampi. Kirjaa ylös kokeilemasi lähestymistavat ja keksimäsi hypoteesit. Toivottavasti pääset itse maaliin, mutta jos et, läpikävely paljastuu tunnilla...)
d) Vapaaehtoinen bonus: Cryptopals. Crypto Challenge Set 1. Tätä voi tehdä useamman viikon bonuksena. Jos saat ratkaistua kohdat 1 .. "4. Detect single-character XOR", olet jo astunut salakirjoituksen maailmaan.


## Ympäristö

Tehtävän suorittamiseen käytin seuraavanlaista tietokonetta:

Lenovo X1 /Intel Core Ultra 7 155U/14WUXGA/32GB/1Tt SSD/5G/W11P/Intel Wi-Fi 6E AX211

Virtualboxissa Debian 13.0 amd64 xfce Linux


># a)

Aloitin lataamalla zip.filen virtuaalikoneelle:

    wget https://terokarvinen.com/loota/yctjx7/ezbin-challenges.zip

<img width="1262" height="339" alt="image" src="https://github.com/user-attachments/assets/6a0dd871-9ba0-4b91-b7e6-bb52bbd81a0a" />

Unzippasin ja käynnistin ohjelman, joka kysyi salasanaa.

     unzip ezbin-challenges.zip

   ./passtr   -käynnisti ohjelman


<img width="800" height="41" alt="image" src="https://github.com/user-attachments/assets/a139865a-3fe4-4acc-8232-1204b181e532" />


Seuraavaksi googlasin, että mikä on strings / mitä se tekee ja sain seuraavaa tietoa:

>**strings** 

- on Unix-työkalu, joka etsii ja tulostaa binäärisistä tiedostoista kaikki tulostettavat merkkijonot
  
  (ASCII/UTF-8, joskus myös UTF-16), eli merkkejä, jotka ovat tavallisen tekstin kaltaisia:
  
  kirjaimia, numeroita, välimerkkejä jne.

- Binääritiedostoissa (esim. ohjelmat, kuvat, kirjastot) suurin osa on "raakatavua", jota ei voi
  
  lukea suoraan, mutta sinne saattaa jäädä kovakoodattuja merkkijonoja, kuten:

  salasanoja, tiedostonimiä, virheilmoituksia jne..

- Käyttökohteina analyysit ja sopii hakkerointiharjoituksiin.

- Voidaan nähdä kovakoodattuja tietoja binääristä ilman sen ajamista; salasanoja, verkkotunnuksia, ip-osoitteita, salausavaimia, harjoitusten merkattuja lippuja jne.

  (chatGPT)

Tässä tapauksessa sitä voisi käyttää seuraavasti:

        strings passtr    
        strings passtr | less     (selaus ruutu kerrallaan) ( q:lla pääsee ulos )

Kokeilin tuota komentoa ja sieltä listautui seuraavan näköisiä rivejä:

<img width="1241" height="537" alt="image" src="https://github.com/user-attachments/assets/2afcdd9f-c1b7-446a-97d2-67a73eccabc7" />

Veikkaan, että löysin salasanan. Kokeillaanpas.

<img width="775" height="111" alt="image" src="https://github.com/user-attachments/assets/c2b152b5-7b5b-4ce9-a04c-16ac54b91ebe" />

Mahtavaa, tämä toimii :)


Ajattelin vielä kokeilla tuota lipun hakua binääristä grepin avulla, josko se toimisi tässä.

        strings passtr | grep FLAG

<img width="741" height="63" alt="image" src="https://github.com/user-attachments/assets/20823a7d-5039-4807-b130-04fce6759edf" />

Merkattu lippu löytyi tällä komennolla suoraan, äskeisen selailun sijasta.





># b)

Avasin passtr.c- tiedoston microeditoriin.

        micro passtr.c


Sieltä löytyi seuraavanlainen koodi:

#include <stdio.h>
#include <string.h>

        int main() {
        	char password[20];
        	
        	printf("What's the password?\n");
        	scanf("%19s", password);
        	if (0 == strcmp(password, "sala-hakkeri-321")) {
        		printf("Yes! That's the password. FLAG{Tero-d75ee66af0a68663f15539ec0f46e3b1}\n");
        	} else {
        		printf("Sorry, no bonus.\n");
        	}
        	return 0;
        }

<img width="1094" height="390" alt="image" src="https://github.com/user-attachments/assets/295b1154-50da-46b4-a3f7-d8d7720cfefb" />

 **Obfuskointi** piti selvittää ensin ja sehän on siis: 

        Ohjelmakoodin muokkaaminen vaikeammin ymmärrettävään muotoon


Tähän käytin apuna keskustelua chat-GPT:n kanssa, koska minulla ei tähän riittäisi suoraan osaaminen. Tälläistä saimme aikaan:

<img width="1185" height="682" alt="image" src="https://github.com/user-attachments/assets/94b38906-4f52-4000-9770-16ab08c321e0" />

Käänsin seuraavaksi tiedoston ohjelmalle passtr:

        gcc -O2 -s passtr.c -o passtr

<img width="648" height="38" alt="image" src="https://github.com/user-attachments/assets/db04cfb5-edbb-43cd-929c-a9fc691491bf" />

Ja kokeilin näkyykö salasana edellen strins-haulla:

<img width="1052" height="290" alt="image" src="https://github.com/user-attachments/assets/86763aa2-e074-4643-9f94-1c30e9b68c2f" />

Ei näyttäisi näkyvän enään.




># c)

># d)
